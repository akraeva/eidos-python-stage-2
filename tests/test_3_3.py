# Stepick.org — Python | Вторая ступень | Продвинутые концепции
# 3. Кортежи | Тип данных - tupl
# 3.3 Задачи на усвоение кортежей + списков

import pytest
from src.module_3 import m_3_3_1, m_3_3_2, m_3_3_3, m_3_3_4

# для запуска pytest -k "test_3_3_" -q -x --tb=short


# === Тест для задачи 3.3.1 ===
@pytest.mark.parametrize(
    "data, expected",
    [
        # Sample Input
        (
            "3\nAlice\nBob\nMichael\n15\n12\n11",
            [("Alice", 15), ("Bob", 12), ("Michael", 11)],
        ),
        # Тест 2 — 1 студент
        (
            "1\nAnna\n100",
            [("Anna", 100)],
        ),
        # Тест 3 — 4 студента
        (
            "4\nTom\nJerry\nSpike\nTyke\n10\n20\n30\n40",
            [("Tom", 10), ("Jerry", 20), ("Spike", 30), ("Tyke", 40)],
        ),
        # Тест 4 — имена с пробелами
        (
            "2\nMary Jane\nPeter Parker\n90\n85",
            [("Mary Jane", 90), ("Peter Parker", 85)],
        ),
        # Тест 5 — отрицательные и нулевые оценки
        (
            "3\nZero\nMinus\nOk\n0\n-10\n5",
            [("Zero", 0), ("Minus", -10), ("Ok", 5)],
        ),
    ],
    ids=[
        "sample",
        "one-student",
        "four-students",
        "names-with-spaces",
        "negative-and-zero-scores",
    ],
)
def test_3_3_1(data, expected):
    assert m_3_3_1(data) == expected


# === Тест для задачи 3.3.2 ===
@pytest.mark.parametrize(
    "data, expected",
    [
        # Sample Input
        (
            "5 10 5 20 10 30 5 40 30 50",
            "Кортеж уникальных элементов: (5, 10, 20, 30, 40, 50)\n"
            "Количество встречающихся элементов: ((5, 3), (10, 2), (20, 1),"
            " (30, 2), (40, 1), (50, 1))",
        ),
        # Тест 2 — все числа разные
        (
            "1 2 3 4 5 6 7 8 9 10",
            "Кортеж уникальных элементов: (1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\n"
            "Количество встречающихся элементов: ((1, 1), (2, 1), (3, 1), "
            "(4, 1), (5, 1), (6, 1), (7, 1), (8, 1), (9, 1), (10, 1))",
        ),
        # Тест 3 — все одинаковые числа
        (
            "7 7 7 7 7 7 7 7 7 7",
            "Кортеж уникальных элементов: (7,)\n"
            "Количество встречающихся элементов: ((7, 10),)",
        ),
        # Тест 4 — числа повторяются по два
        (
            "1 1 2 2 3 3 4 4 5 5",
            "Кортеж уникальных элементов: (1, 2, 3, 4, 5)\n"
            "Количество встречающихся элементов: ((1, 2), (2, 2), (3, 2), "
            "(4, 2), (5, 2))",
        ),
        # Тест 5 — перемешанные числа с повторениями
        (
            "9 8 9 7 8 9 6 5 6 5",
            "Кортеж уникальных элементов: (9, 8, 7, 6, 5)\n"
            "Количество встречающихся элементов: ((9, 3), (8, 2), (7, 1), "
            "(6, 2), (5, 2))",
        ),
    ],
    ids=[
        "sample",
        "all-unique",
        "all-same",
        "pairs",
        "mixed-repeats",
    ],
)
def test_3_3_2(data, expected):
    assert m_3_3_2(data) == expected


# === Тест для задачи 3.3.3 ===


@pytest.mark.parametrize(
    "data, expected",
    [
        # Пример 1 из условия
        (
            "10 20 30 40 50 60 70 80 90 100\n1 3 5",
            "Измененный список: [10, 22.0, 30, 44.0, 50, 66.0, 70, 80, 90, 100]",
        ),
        # Пример 2 из условия
        (
            "5 15 25 35 45 55 65 75 85 95\n0 4 7",
            "Измененный список: [5.5, 15, 25, 35, 49.5, 55, 65, 82.5, 85, 95]",
        ),
        # Пример 3 из условия
        (
            "100 200 300 400 500 600 700 800 900 1000\n2 5 8",
            "Измененный список: [100, 200, 330.0, 400, 500, 660.0, 700, 800, 990.0, 1000]",
        ),
        # Дополнительный тест — индексы в начале и конце
        (
            "10 20 30 40 50 60 70 80 90 100\n0 9 4",
            "Измененный список: [11.0, 20, 30, 40, 55.0, 60, 70, 80, 90, 110.0]",
        ),
        # Дополнительный тест — повтор индекса (не должен дублировать увеличение)
        (
            "1 2 3 4 5 6 7 8 9 10\n2 2 2",
            "Измененный список: [1, 2, 3.3, 4, 5, 6, 7, 8, 9, 10]",
        ),
        # Дополнительный тест — все индексы
        (
            "1 2 3 4 5 6 7 8 9 10\n0 1 2 3 4 5 6 7 8 9",
            "Измененный список: [1.1, 2.2, 3.3, 4.4, 5.5, 6.6, 7.7, 8.8, 9.9, 11.0]",
        ),
    ],
    ids=[
        "sample-1",
        "sample-2",
        "sample-3",
        "edges",
        "duplicate-index",
        "all-indices",
    ],
)
def test_3_3_3(data, expected):
    assert m_3_3_3(data) == expected


# === Тест к задаче 4 ===


@pytest.mark.parametrize(
    "data, expected",
    [
        # Пример из условия
        (
            ("apple", "banana", "cherry", "apple", "date", "banana", "cherry", "fig"),
            ("apple", "banana", "cherry", "date", "fig"),
        ),
        # Тест без дубликатов (результат должен быть тем же)
        (
            ("alpha", "beta", "gamma"),
            ("alpha", "beta", "gamma"),
        ),
        # Тест с полностью одинаковыми элементами
        (
            ("x", "x", "x", "x"),
            ("x",),
        ),
        # Тест с элементами, требующими сортировки
        (
            ("pear", "apple", "orange", "banana"),
            ("apple", "banana", "orange", "pear"),
        ),
        # Тест со смешанным регистром (строчные идут после заглавных в ASCII)
        (
            ("Apple", "apple", "Banana", "banana"),
            ("Apple", "Banana", "apple", "banana"),
        ),
    ],
    ids=["sample", "no-duplicates", "all-same", "unsorted", "mixed-case"],
)
def test_3_3_4(data, expected):
    assert m_3_3_4(data) == expected
