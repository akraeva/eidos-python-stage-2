# Stepick.org — Python | Вторая ступень | Продвинутые концепции
# 2.  Списки | Тип данных - list
# 2.5 Итерация по вложенным спискам | for i in [1, 2, 3]

import pytest
from src.module_2 import m_2_5_1, m_2_5_2, m_2_5_3, m_2_5_4

# для запуска pytest -k "test_2_5_" -q -x --tb=short


# === Тест к задаче 1 ===


@pytest.mark.parametrize(
    "data, expected",
    [
        # пример из задания
        ([[7, 3], [10, 15], [2, 8]], "2\n15"),
        # все положительные числа, минимум и максимум в разных подсписках
        ([[1, 2, 3], [9, 4, 5], [6, 7, 8]], "1\n9"),
        # отрицательные и положительные
        ([[-5, -2], [0, 3], [10, -1]], "-5\n10"),
        # все одинаковые значения
        ([[5, 5], [5, 5]], "5\n5"),
        # вложенные списки с одним элементом
        ([[42], [17], [99]], "17\n99"),
        # один подсписок
        ([[3, 7, 9]], "3\n9"),
        # большое количество вложенных списков
        ([list(range(i, i + 3)) for i in range(0, 20, 3)], "0\n20"),
    ],
)
def test_2_5_1(data, expected):
    assert m_2_5_1(data) == expected


# === Тест к задаче 2 ===


@pytest.mark.parametrize(
    "data, expected",
    [
        # пример из задания
        ([[1, 2, 3], [4, 5, 6], [7, 8, 9]], [2, 4, 6, 8]),
        # только чётные числа
        ([[2, 4], [6, 8], [10, 12]], [2, 4, 6, 8, 10, 12]),
        # только нечётные числа
        ([[1, 3, 5], [7, 9, 11]], []),
        # смешанные положительные и отрицательные
        ([[-3, -2, -1], [0, 1, 2]], [-2, 0, 2]),
        # пустые подсписки
        ([[], [2, 4], []], [2, 4]),
        # вложенные списки с разным количеством элементов
        ([[10], [11, 12, 13, 14], [15]], [10, 12, 14]),
        # одно вложение, все чётные
        ([[8, 6, 4, 2, 0]], [8, 6, 4, 2, 0]),
        # большое количество элементов
        ([list(range(1, 21))], [2, 4, 6, 8, 10, 12, 14, 16, 18, 20]),
    ],
)
def test_2_5_2(data, expected):
    assert m_2_5_2(data) == expected


# === Тест к задаче 3 ===


@pytest.mark.parametrize(
    "data, expected",
    [
        # пример из задания
        (
            [[1, 2, 3], [4, 5, 6], [7, 8, 9]],
            [[0, 2, 0], [4, 0, 6], [0, 8, 0]],
        ),
        # все чётные — ничего не заменяется
        (
            [[2, 4, 6], [8, 10, 12]],
            [[2, 4, 6], [8, 10, 12]],
        ),
        # все нечётные — всё заменяется на 0
        (
            [[1, 3, 5], [7, 9, 11]],
            [[0, 0, 0], [0, 0, 0]],
        ),
        # отрицательные числа
        (
            [[-3, -2, -1], [0, 1, 2]],
            [[0, -2, 0], [0, 0, 2]],
        ),
        # пустые подсписки
        (
            [[], [1, 2, 3], []],
            [[], [0, 2, 0], []],
        ),
        # один подсписок
        (
            [[5, 6, 7]],
            [[0, 6, 0]],
        ),
        # большие значения
        (
            [[101, 202, 303], [404, 505, 606]],
            [[0, 202, 0], [404, 0, 606]],
        ),
    ],
)
def test_2_5_3(data, expected):
    assert m_2_5_3(data) == expected


# === Тест к задаче 4 ===


@pytest.mark.parametrize(
    "data, expected",
    [
        # пример из задания
        (
            [[1, 2, 3], [4, 5, 6], [7, 8, 9]],
            [6, 15, 24],
        ),
        # одна строка
        (
            [[10, 20, 30]],
            [60],
        ),
        # одна колонка
        (
            [[1], [2], [3], [4]],
            [1, 2, 3, 4],
        ),
        # отрицательные числа
        (
            [[-1, -2, -3], [4, 5, -6], [7, -8, 9]],
            [-6, 3, 8],
        ),
        # пустая матрица
        (
            [],
            [],
        ),
        # пустые подсписки
        (
            [[], [1, 2], [], [3]],
            [0, 3, 0, 3],
        ),
        # большие числа
        (
            [[100, 200, 300], [400, 500, 600]],
            [600, 1500],
        ),
    ],
)
def test_2_5_4(data, expected):
    assert m_2_5_4(data) == expected
